FROM node:20-alpine
WORKDIR /app
COPY frontend/package.json frontend/package-lock.json* ./
RUN npm install --no-audit --no-fund
COPY frontend/ ./
ENV VITE_API_URL=http://server:3000
RUN npm run build
EXPOSE 4173
ENV HOST=0.0.0.0
CMD ["npm", "run", "preview", "--", "--host", "--strictPort"]


